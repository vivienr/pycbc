

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installing lalsuite for PyCBC &mdash; PyCBC 785ddb documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/terminal.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PyCBC 785ddb documentation" href="index.html"/>
        <link rel="up" title="Installing PyCBC" href="install.html"/>
        <link rel="next" title="Building Documentation for Git Hub Pages" href="build_gh_pages.html"/>
        <link rel="prev" title="Setting up virtualenv" href="install_virtualenv.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PyCBC
          

          
          </a>

          
            
            
              <div class="version">
                1.7.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="credit.html">Use of PyCBC in Scientific Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Running PyCBC under Docker</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="install.html">Installing PyCBC</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html#setting-up-a-virtual-environment-for-installing-pycbc">Setting up a virtual environment for installing PyCBC</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="install.html#installing-lalsuite-into-a-virtual-environment">Installing lalsuite into a virtual environment</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Installing lalsuite for PyCBC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#obtaining-the-source-code-and-checking-out-a-version">Obtaining the source code and checking out a version</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-and-installing-into-your-virtual-environment">Building and installing into your virtual environment</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-pycbc-in-a-virtual-environment">Installing PyCBC in a virtual environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#building-and-installing-documentation">Building and Installing Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#modifying-pycbc-glue">Modifying pycbc-glue</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#use-of-intel-mkl-optimized-fft-libraries">Use of Intel MKL Optimized FFT libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#graphics-processing-unit-support-with-cuda">Graphics Processing Unit support with CUDA</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow/pycbc_make_psd_estimation_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow/pycbc_make_coinc_search_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow/pygrb.html"><code class="docutils literal"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow/pycbc_make_inference_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_inference_workflow</span></code>: A parameter estimation workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="inference.html">PyCBC inference documentation (<code class="docutils literal"><span class="pre">pycbc.inference</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gw150914.html">Signal Processing with GW150914</a></li>
<li class="toctree-l1"><a class="reference internal" href="frame.html">Reading Gravitational-wave Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="psd.html">Handling PSDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise.html">Generating Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="waveform.html">Waveforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="filter.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributions.html">Using PyCBC Distributions from PyCBC Inference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="building_bundled_executables.html">Building Bundled Executables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">pycbc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyCBC</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="install.html">Installing PyCBC</a> &raquo;</li>
        
      <li>Installing lalsuite for PyCBC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/install_lalsuite.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-lalsuite-for-pycbc">
<span id="lalsuite-install"></span><h1>Installing lalsuite for PyCBC<a class="headerlink" href="#installing-lalsuite-for-pycbc" title="Permalink to this headline">Â¶</a></h1>
<p>The following page describes how to build lalsuite from source for use with PyCBC.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>These instructions assume that you already have the required dependencies for lalsuite installed on your system. You must have <code class="docutils literal"><span class="pre">git</span></code>, <code class="docutils literal"><span class="pre">FFTW</span></code>, <code class="docutils literal"><span class="pre">GSL</span></code>, <code class="docutils literal"><span class="pre">FrameL</span></code>, and <code class="docutils literal"><span class="pre">MetaIO</span></code> installed before continuing.</p>
<p class="last">These packages are installed by default on a LIGO Data Grid cluster. If you are not on a LIGO Data Grid cluster, then you can download them from the <a class="reference external" href="https://wiki.ligo.org/DASWG/SoftwareDownloads">lscsoft repository</a> or see the <a class="reference external" href="https://www.lsc-group.phys.uwm.edu/daswg/docs/howto/lscsoft-install.html">lscsoft install instructions</a> for instructions on building the dependencies from source. You can also contact your system administrator to determine if these packages are available using the <code class="docutils literal"><span class="pre">module</span> <span class="pre">load</span></code> command.</p>
</div>
<div class="section" id="obtaining-the-source-code-and-checking-out-a-version">
<h2>Obtaining the source code and checking out a version<a class="headerlink" href="#obtaining-the-source-code-and-checking-out-a-version" title="Permalink to this headline">Â¶</a></h2>
<p>In your virtual environment, make a directory for the lalsuite source. Enter
your virtual environment with the command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/src/pycbc/bin/activate
</pre></div>
</div>
<p>changing the path to the activate script appropriately.  Clone the lalsuite repository into the directory <code class="docutils literal"><span class="pre">${VIRTUAL_ENV}/src/lalsuite</span></code> by running the commands</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>mkdir -p <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/src
<span class="nb">cd</span> <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/src
git clone https://github.com/lscsoft/lalsuite.git
</pre></div>
</div>
<p>Note that this checks out a read-only repository. If you want a git repository
that you can edit, you can either fork this repository to your own GitHub
account or, if you have <code class="docutils literal"><span class="pre">LIGO.ORG</span></code> credentials, you can follow the
<a class="reference external" href="https://www.lsc-group.phys.uwm.edu/daswg/docs/howto/advanced-lalsuite-git.html#clone">instructions on the DASWG pages for cloning lalsuite</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since building lalsuite is very disk intensive, you may want to store the lalsuite git repository on a local disk rather than an NSF-mounted directory. If this is the case, change the path in the <code class="docutils literal"><span class="pre">mkdir</span></code> and <code class="docutils literal"><span class="pre">cd</span></code> above to a directory on a non-NFS mounted filesystem. This ie not required, as lalsuite will build on an NFS disk, it is just slower.</p>
</div>
<p>Once you have the repository cloned, you should change your working directory to the top-level of the repository with</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/src/lalsuite
</pre></div>
</div>
<p>Now determine which version of the code you want to install. To run the latest (possibly unstable) version of the code, use the <code class="docutils literal"><span class="pre">master</span></code> branch by running the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git checkout master
</pre></div>
</div>
<p>If you want to build a specific release, replace <code class="docutils literal"><span class="pre">master</span></code> with a release tag, for example <code class="docutils literal"><span class="pre">lalsuite-v6.30</span></code>. See the <a class="reference external" href="https://ligo-vcs.phys.uwm.edu/cgit/lalsuite/refs/tags">list of lalsuite tags</a> for available tags. You can also check out a branch from the <a class="reference external" href="https://ligo-vcs.phys.uwm.edu/cgit/lalsuite/refs/heads">list of lalsuite branches</a> in the same way; replace <code class="docutils literal"><span class="pre">master</span></code> with the branch name, e.g. <code class="docutils literal"><span class="pre">lalsuite_o1_branch</span></code>.  Once you have checked out a tag or a branch, you can build and install lalsuite.</p>
</div>
<div class="section" id="building-and-installing-into-your-virtual-environment">
<h2>Building and installing into your virtual environment<a class="headerlink" href="#building-and-installing-into-your-virtual-environment" title="Permalink to this headline">Â¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The install instructions below install lalsuite into a directory called <code class="docutils literal"><span class="pre">opt/lalsuite</span></code> under your virtual environment. You can remove lalsuite by removing this directory with <code class="docutils literal"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">${VIRTUAL_ENV}/opt/lalsuite</span></code> from inside your virtual environment. If you want to install multiple versions of lalsuite in your virtual environment, you can chose different directories by specifying a different <code class="docutils literal"><span class="pre">--prefix</span></code> to configure below.</p>
</div>
<p>First make sure you are in your virtual environment by activiating it. If you
are not already in your virtual environment run the command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/src/pycbc/bin/activate
</pre></div>
</div>
<p>changing the string <code class="docutils literal"><span class="pre">~/src/pycbc</span></code> appropriately to point to your
environment.</p>
<p>From the top-level lalsuite directory, you can use the master configure script to build and install all of the components that you need with the commands</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>./00boot
./configure --prefix<span class="o">=</span><span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/opt/lalsuite --enable-swig-python --disable-lalstochastic --disable-lalxml --disable-lalinference --disable-laldetchar --disable-lalapps
</pre></div>
</div>
<p>Next make the software and install it. If you are on a multicore machine, you
can speed this up by running <code class="docutils literal"><span class="pre">make</span> <span class="pre">-j</span> <span class="pre">N</span></code> where <code class="docutils literal"><span class="pre">N</span></code> is the number of
processors you want to use for the build (e.g. 16).</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>make
make install
</pre></div>
</div>
<p>The install process creates a shell script called <code class="docutils literal"><span class="pre">lalsuite-user-env.sh</span></code> that sources all of the <code class="docutils literal"><span class="pre">${VIRTUAL_ENV}/opt/lalsuite/etc/lal*-user-env.sh</span></code> scripts that set up the environment for lalsuite. You can add this to your virtualenv <code class="docutils literal"><span class="pre">activate</span></code> script so that it gets set up when you enter your virtual environment. To do this, run the commands</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s1">&#39;source ${VIRTUAL_ENV}/opt/lalsuite/etc/lalsuite-user-env.sh&#39;</span> &gt;&gt; <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/bin/activate
deactivate
</pre></div>
</div>
<p>You can reenter your virtual environment with the usual command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/pycbc/src/bin/activate
</pre></div>
</div>
<p>changing <code class="docutils literal"><span class="pre">~/pycbc/src</span></code> as appropriate for your virtual environment path.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to manage multiple versions of lalsuite, it is not reccommended to source the <code class="docutils literal"><span class="pre">lalsuite-user-env.sh</span></code> script from your activate script.  You should just source it when you enter your virtual environment with the command <code class="docutils literal"><span class="pre">source</span> <span class="pre">${VIRTUAL_ENV}/opt/lalsuite/etc/lalsuite-user-env.sh</span></code></p>
</div>
<p>lalsuite is now installed in your virtual environment. You can check this with the command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="nv">$LAL_PREFIX</span>
</pre></div>
</div>
<p>which should return the path to the installation under your virtual environment.</p>
<p>If you are running a pipeline that uses the old LALApps programs <code class="docutils literal"><span class="pre">lalapps_inspinj</span></code> or <code class="docutils literal"><span class="pre">lalapps_coh_PTF_inspiral</span></code> then you can optionally build and install these by running the commands</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On the AEI atlas cluster, the HDF5 libraries are installed in a non-stardard location so you will need to add <code class="docutils literal"><span class="pre">-L/usr/lib/x86_64-linux-gnu/hdf5/serial</span></code> to the <code class="docutils literal"><span class="pre">LIBS</span></code> variable before configuring lalapps.</p>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$VIRTUAL_ENV</span>/src/lalsuite/lalapps
<span class="nv">LIBS</span><span class="o">=</span><span class="s2">&quot;-lhdf5_hl -lhdf5 -ldl -lz&quot;</span> ./configure --prefix<span class="o">=</span><span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/opt/lalsuite --enable-static-binaries --disable-lalinference --disable-lalburst --disable-lalpulsar --disable-lalstochastic --disable-lalxml
<span class="nb">cd</span> <span class="nv">$VIRTUAL_ENV</span>/src/lalsuite/lalapps/src/lalapps
make
<span class="nb">cd</span> <span class="nv">$VIRTUAL_ENV</span>/src/lalsuite/lalapps/src/inspiral
make lalapps_inspinj
cp lalapps_inspinj <span class="nv">$VIRTUAL_ENV</span>/bin
<span class="nb">cd</span> <span class="nv">$VIRTUAL_ENV</span>/src/lalsuite/lalapps/src/ring
make lalapps_coh_PTF_inspiral
cp lalapps_coh_PTF_inspiral <span class="nv">$VIRTUAL_ENV</span>/bin
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The LALApps build above builds static binaries, so you will need static libraries for fftw, glibc, etc. installed on your system to do this. These libraries are present by default in a LIGO Data Grid environment. If you do not wish to build static LALApps programs, the omit the <code class="docutils literal"><span class="pre">--enable-static-binaries</span></code> option to the configure script.</p>
</div>
<p>In addition to lalsuite, the generation of certain template waveforms (e.g.  the reduced order model implementations of SEOBNRv2 and SEOBNRv4) requires addition data files from the <a class="reference external" href="https://svn.ligo.caltech.edu/svn/lalsuite-extra/">lalsuite-extra repository</a>. These data can either be obtained by downloading and installing lalsuite-extra into your virtual environment or using a copy of the data from the CERN virtual filesystem.</p>
<p>To install the data into your virtual environment, run the commands</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/src
svn co https://svn.ligo.caltech.edu/svn/lalsuite-extra/
<span class="nb">cd</span> lalsuite-extra
./00boot
./configure --prefix<span class="o">=</span><span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/opt/lalsuite-extra
make install
<span class="nb">echo</span> <span class="s1">&#39;export LAL_DATA_PATH=${VIRTUAL_ENV}/opt/lalsuite-extra/share/lalsimulation&#39;</span> &gt;&gt; <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/bin/activate
</pre></div>
</div>
<p>Then deactivate and activate your virtual environment.</p>
<p>Alternatively, follow the <a class="reference external" href="https://twiki.grid.iu.edu/bin/view/Documentation/Release3/InstallCvmfs">instructions for installing CVMFS for OSG</a> and
run the command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s1">&#39;export LAL_DATA_PATH=/cvmfs/oasis.opensciencegrid.org/ligo/sw/pycbc/lalsuite-extra/current/share/lalsimulation&#39;</span> &gt;&gt; <span class="nv">$VIRTUAL_ENV</span>/bin/activate
</pre></div>
</div>
<p>to add the appropriate path to your virtual environment&#8217;s <code class="docutils literal"><span class="pre">activate</span></code> script.
Then deactivate and activate your virtual environment.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="build_gh_pages.html" class="btn btn-neutral float-right" title="Building Documentation for Git Hub Pages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install_virtualenv.html" class="btn btn-neutral" title="Setting up virtualenv" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016, 2017, Alexander Nitz, Ian Harry, Christopher M. Biwer, Duncan A.  Brown, Josh Willis, and Tito Dal Canton.
      Last updated on May 04, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'785ddb',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/typed.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>